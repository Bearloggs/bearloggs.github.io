---
interface Props {
  src: string;
  alt: string;
  width?: number;
  height?: number;
  className?: string;
  priority?: boolean;
  itemprop?: string;
}

const {
  src,
  alt,
  width,
  height,
  className = "",
  priority = false,
  itemprop
} = Astro.props;

const imageUrl = new URL(src, Astro.site);
---

<picture>
  <source
    srcset={`${imageUrl}?format=webp`}
    type="image/webp"
  />
  <img
    src={src}
    alt={alt}
    width={width}
    height={height}
    class={className}
    loading={priority ? "eager" : "lazy"}
    decoding="async"
    {...(itemprop ? { itemprop } : {})}
  />
</picture> 